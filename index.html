<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aimers Test Series | Final Exam</title>
    <style>
        :root { --p: #1e40af; --d: #dc2626; --s: #059669; }
        body { font-family: sans-serif; background: #f1f5f9; margin: 0; padding: 10px; user-select: none; }
        #timer-bar { position: fixed; top: 0; left: 0; width: 100%; background: var(--d); color: white; text-align: center; padding: 15px; font-size: 24px; font-weight: bold; z-index: 10000; }
        .main-card { max-width: 650px; margin: 90px auto 30px; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        .header { text-align: center; border-bottom: 3px solid var(--p); margin-bottom: 20px; padding-bottom: 10px; }
        .input-box { background: #eff6ff; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #bfdbfe; }
        input[type="text"] { width: 100%; padding: 12px; margin: 8px 0; border: 2px solid #cbd5e1; border-radius: 6px; box-sizing: border-box; font-size: 16px; }
        .question { border: 1px solid #e2e8f0; padding: 18px; border-radius: 10px; margin-bottom: 15px; background: #fff; }
        .q-text { font-weight: bold; font-size: 17px; margin-bottom: 12px; display: block; }
        label { display: block; padding: 12px; border: 1px solid #eee; border-radius: 8px; margin-bottom: 8px; cursor: pointer; }
        label:hover { background: #f1f5f9; }
        .btn { width: 100%; padding: 18px; background: var(--s); color: white; border: none; border-radius: 8px; font-size: 20px; font-weight: bold; cursor: pointer; }
        .score-circle { width: 100px; height: 100px; line-height: 100px; border-radius: 50%; background: var(--p); color: white; font-size: 28px; font-weight: bold; margin: 20px auto; text-align: center; }
    </style>
</head>
<body>

<div id="timer-bar">Time Left: <span id="timerText">60:00</span></div>

<div class="main-card" id="examBox">
    <div class="header">
        <h2 style="color:var(--p); margin:0;">AIMERS TEST SERIES</h2>
        <small>Registration & Exam Portal</small>
    </div>

    <div class="input-box">
        <b>Name:</b> <input type="text" id="stuName" placeholder="Enter Full Name...">
        <b>Registration No:</b> <input type="text" id="stuReg" placeholder="Enter ID...">
    </div>

    <div id="questions-container">
        <script>
            const questions = [
                { q: "d/dx (sin x) is?", a: "cos x", b: "-cos x", ans: "A" },
                { q: "log(a) + log(b) is?", a: "log(a/b)", b: "log(ab)", ans: "B" },
                { q: "d/dx (x^2) is?", a: "2x", b: "x^2", ans: "A" },
                { q: "log 1 is?", a: "1", b: "0", ans: "B" },
                { q: "d/dx (e^x) is?", a: "e^x", b: "1/e^x", ans: "A" },
                { q: "d/dx (constant) is?", a: "1", b: "0", ans: "B" },
                { q: "log_a (a) is?", a: "0", b: "1", ans: "B" },
                { q: "d/dx (log x) is?", a: "1/x", b: "x", ans: "A" },
                { q: "d/dx (tan x) is?", a: "sec^2 x", b: "cos^2 x", ans: "A" },
                { q: "log(m^n) is?", a: "n log m", b: "m log n", ans: "A" },
                { q: "d/dx (cos x) is?", a: "sin x", b: "-sin x", ans: "B" },
                { q: "log_2 (8) is?", a: "3", b: "4", ans: "A" },
                { q: "d/dx (sqrt x) is?", a: "1/(2 sqrt x)", b: "2 sqrt x", ans: "A" },
                { q: "log(m/n) is?", a: "log m - log n", b: "log m + log n", ans: "A" },
                { q: "d/dx (x^n) is?", a: "n x^(n-1)", b: "x^(n+1)", ans: "A" },
                { q: "log_10 (100) is?", a: "10", b: "2", ans: "B" },
                { q: "d/dx (a^x) is?", a: "a^x log a", b: "x a^(x-1)", ans: "A" },
                { q: "Value of log_e (e)?", a: "1", b: "0", ans: "A" },
                { q: "d/dx (cot x) is?", a: "-cosec^2 x", b: "sec^2 x", ans: "A" },
                { q: "d/dx (sec x) is?", a: "sec x tan x", b: "tan x", ans: "A" }
            ];

            let html = "";
            questions.forEach((item, i) => {
                html += `
                <div class="question" data-ans="${item.ans}">
                    <span class="q-text">${i+1}. ${item.q}</span>
                    <label><input type="radio" name="q${i+1}" value="A"> ${item.a}</label>
                    <label><input type="radio" name="q${i+1}" value="B"> ${item.b}</label>
                </div>`;
            });
            document.write(html);
        </script>
        
        <button class="btn" onclick="finishExam()">FINISH TEST & SHOW SCORE</button>
    </div>
</div>

<script>
    const MY_WA = "91XXXXXXXXXX"; // APNA NUMBER DALO
    let timeLeft = 3600;
    let ended = false;

    // TIMER FIX: Force start
    function startTimer() {
        const display = document.getElementById('timerText');
        const timer = setInterval(() => {
            if(ended) { clearInterval(timer); return; }
            let m = Math.floor(timeLeft / 60), s = timeLeft % 60;
            display.innerText = ${m}:${s < 10 ? '0' : ''}${s};
            if(timeLeft-- <= 0) finishExam("Time Up");
        }, 1000);
    }
    window.onload = startTimer;

    // SECURITY
    document.addEventListener("visibilitychange", () => {
        if (document.hidden && !ended) {
            alert("Security Violation!");
            finishExam("Cheat Detected");
        }
    });

    function finishExam(status = "Success") {
        if(ended) return;
        const name = document.getElementById('stuName').value.trim();
        const reg = document.getElementById('stuReg').value.trim();
        if(!name || !reg) { alert("Details bhariye!"); return; }

        ended = true;
        let score = 0;
        document.querySelectorAll('.question').forEach((q, i) => {
            const sel = document.querySelector(input[name="q${i+1}"]:checked)?.value;
            if(sel === q.dataset.ans) score++;
        });

        const report = *Aimers Report*%0A*Name:* ${name}%0A*Reg:* ${reg}%0A*Score:* ${score}/20%0A*Status:* ${status};
        
        // Final Screen with Score
        document.getElementById('timer-bar').style.display = 'none';
        document.getElementById('examBox').innerHTML = `
            <div style="text-align:center;">
                <h2 style="color:var(--s);">Test Done!</h2>
                <p>Hello ${name}, your score is:</p>
                <div class="score-circle">${score}/20</div>
                <button class="btn" onclick="window.location.href='https://wa.me/${MY_WA}?text=${report}'">Send to Teacher (WhatsApp)</button>
            </div>`;
    }
</script>
</body>
</html>